<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title th:text="${appName} ?: 'SupplyFlow'">SupplyFlow</title>
  <link rel="icon" th:href="@{/favicon.ico}" />
  <!-- Minimal, clean styles without external deps -->
  <style>
    :root{--bg:#0f172a;--card:#111827;--muted:#9ca3af;--text:#e5e7eb;--brand:#22d3ee;--brand-2:#a78bfa;--ok:#34d399;--warn:#f59e0b;--danger:#ef4444}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,'Helvetica Neue',Arial,'Apple Color Emoji','Segoe UI Emoji';background:linear-gradient(180deg,#0b1022,#0f172a 30%,#0f172a 70%,#111827);color:var(--text)}
    a{color:var(--brand);text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1100px;margin:0 auto;padding:1.25rem}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:.75rem 0}
    .brand{display:flex;align-items:center;gap:.6rem;font-weight:800;font-size:1.15rem;letter-spacing:.2px}
    .brand-badge{width:36px;height:36px;border-radius:10px;background:conic-gradient(from 180deg,var(--brand),var(--brand-2));display:grid;place-items:center;box-shadow:0 6px 20px rgba(124,58,237,.25)}
    .brand-badge svg{filter:drop-shadow(0 2px 8px rgba(34,211,238,.45))}
    .nav-links{display:flex;gap:.9rem;flex-wrap:wrap}
    .btn{padding:.65rem 1rem;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.03);color:var(--text);font-weight:600}
    .btn:hover{background:rgba(255,255,255,.06)}
    .btn.primary{background:linear-gradient(90deg,var(--brand),var(--brand-2));border:0;color:#0b1022}
    .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:1.5rem;align-items:center;padding:2rem 0}
    @media (max-width:900px){.hero{grid-template-columns:1fr;}}
    .h-title{font-size:clamp(1.8rem,3.5vw,3rem);line-height:1.1;margin:.25rem 0 .5rem}
    .h-sub{color:var(--muted);max-width:60ch}
    .pill{display:inline-flex;align-items:center;gap:.5rem;background:rgba(34,211,238,.1);border:1px solid rgba(34,211,238,.25);color:#a7f3d0;padding:.35rem .6rem;border-radius:999px;font-size:.85rem}
    .glass{background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);box-shadow:0 8px 30px rgba(0,0,0,.25);backdrop-filter:blur(6px)}
    .hero-card{border-radius:18px;padding:1rem}
    .status{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:.8rem;margin-top:1rem}
    .status .kpi{padding:.75rem;border-radius:14px;border:1px dashed rgba(255,255,255,.1);text-align:center}
    .kpi .num{font-weight:800;font-size:1.15rem}
    .grid{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:1rem}
    @media (max-width:1000px){.grid{grid-template-columns:repeat(2,minmax(0,1fr));}}
    @media (max-width:640px){.grid{grid-template-columns:1fr}}
    .card{border-radius:18px;padding:1rem;border:1px solid rgba(255,255,255,.08)}
    .card h3{margin:.25rem 0 .35rem}
    .muted{color:var(--muted)}
    .cta{display:flex;gap:.75rem;flex-wrap:wrap;margin:1.1rem 0}
    .footer{margin-top:2rem;padding:1.2rem 0;border-top:1px solid rgba(255,255,255,.08);color:var(--muted);font-size:.95rem}
    .illus{width:100%;aspect-ratio:16/10;border-radius:16px;border:1px solid rgba(255,255,255,.08);display:grid;place-items:center;overflow:hidden}
    .illus svg{width:100%;height:100%}
    .badge{font-size:.75rem;padding:.25rem .5rem;border-radius:999px;border:1px solid rgba(255,255,255,.12);}
  </style>
</head>
<body>
  <header class="container nav">
    <div class="brand">
      <div class="brand-badge glass" aria-hidden="true">
        <!-- Inline SVG logo (included image) -->
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M4 12h6l3-8 3 16 2-8h2" stroke="#0b1022" stroke-width="2"/>
        </svg>
      </div>
      <span th:text="${appName} ?: 'SupplyFlow'">SupplyFlow</span>
      <span class="badge" th:if="${version}" th:text="'v' + ${version}">v1.0</span>
    </div>
    <nav class="nav-links">
      <a class="btn" th:href="@{/user/list}">Usuarios</a>
      <a class="btn" th:href="@{/product/list}">Productos</a>
      <a class="btn" th:href="@{/request/list}">Pedidos</a>
      <a class="btn" th:href="@{/reports/orders}">Reportes</a>
      <a class="btn primary" th:href="@{/request/form}">Nuevo Pedido</a>
    </nav>
  </header>

  <main class="container">
    <!-- HERO -->
    <section class="hero">
      <div>
        <span class="pill">Gestión de suministros • Roles y permisos • Trazabilidad</span>
        <h1 class="h-title" th:text="${heroTitle} ?: 'Administra tus productos y pedidos con precisión'">
          Administra tus productos y pedidos con precisión
        </h1>
        <p class="h-sub" th:text="${heroSubtitle} ?: 'Crea usuarios, define permisos, genera y envía pedidos, y visualiza el historial en un solo lugar.'">
          Crea usuarios, define permisos, genera y envía pedidos, y visualiza el historial en un solo lugar.
        </p>
        <div class="cta">
          <a class="btn primary" th:href="@{/request/form}">Crear pedido</a>
          <a class="btn" th:href="@{/docs/getting-started}">Documentación</a>
        </div>
        <div class="status">
          <div class="kpi glass">
            <div class="num" th:text="${kpiUsers} ?: 128">128</div>
            <div class="muted">Usuarios activos</div>
          </div>
          <div class="kpi glass">
            <div class="num" th:text="${kpiProducts} ?: 642">642</div>
            <div class="muted">Productos</div>
          </div>
          <div class="kpi glass">
            <div class="num" th:text="${kpiOrders} ?: 1_204">1,204</div>
            <div class="muted">Pedidos totales</div>
          </div>
        </div>
      </div>
      <div class="hero-card glass">
        <!-- Included illustration (inline SVG "screenshot") -->
        <div class="illus">
          <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Vista previa de SupplyFlow">
            <defs>
              <linearGradient id="g1" x1="0" x2="1">
                <stop offset="0" stop-color="#22d3ee"/>
                <stop offset="1" stop-color="#a78bfa"/>
              </linearGradient>
            </defs>
            <rect x="0" y="0" width="800" height="500" fill="#0f172a"/>
            <rect x="30" y="30" width="740" height="440" rx="16" fill="#111827" stroke="#1f2937"/>
            <rect x="50" y="60" width="160" height="20" rx="6" fill="#1f2937"/>
            <rect x="50" y="95" width="120" height="14" rx="6" fill="#1f2937"/>
            <rect x="50" y="125" width="120" height="14" rx="6" fill="#1f2937"/>
            <rect x="230" y="60" width="520" height="360" rx="10" fill="#0b1022" stroke="#1f2937"/>
            <!-- Fake table -->
            <rect x="250" y="90" width="480" height="28" rx="6" fill="#1f2937"/>
            <rect x="250" y="130" width="480" height="28" rx="6" fill="#1f2937"/>
            <rect x="250" y="170" width="480" height="28" rx="6" fill="#1f2937"/>
            <rect x="250" y="210" width="480" height="28" rx="6" fill="#1f2937"/>
            <rect x="250" y="250" width="480" height="28" rx="6" fill="#1f2937"/>
            <rect x="250" y="290" width="480" height="28" rx="6" fill="#1f2937"/>
            <rect x="250" y="330" width="300" height="28" rx="6" fill="#1f2937"/>
            <!-- CTA button -->
            <rect x="570" y="410" width="160" height="36" rx="10" fill="url(#g1)"/>
          </svg>
        </div>
      </div>
    </section>

    <!-- FEATURES -->
    <section class="grid" aria-label="Funciones principales">
      <!-- Crear Usuarios -->
      <article class="card glass">
        <div class="illus" style="aspect-ratio: 16/9">
          <!-- icono incluido -->
          <svg viewBox="0 0 200 112" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect width="200" height="112" rx="14" fill="#0b1022"/>
            <circle cx="48" cy="56" r="20" fill="#22d3ee"/>
            <rect x="80" y="46" width="90" height="20" rx="8" fill="#1f2937"/>
            <rect x="80" y="74" width="70" height="12" rx="6" fill="#1f2937"/>
          </svg>
        </div>
        <h3>Crear Usuarios</h3>
        <p class="muted">Registra empleados y administradores. Define datos clave y estado activo/inactivo.</p>
        <div class="cta">
          <a class="btn" th:href="@{/user/form}">Nuevo usuario</a>
          <a class="btn" th:href="@{/user/list}">Ver usuarios</a>
        </div>
      </article>

      <!-- Crear Productos -->
      <article class="card glass">
        <div class="illus" style="aspect-ratio: 16/9">
          <svg viewBox="0 0 200 112" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect width="200" height="112" rx="14" fill="#0b1022"/>
            <rect x="24" y="26" width="60" height="60" rx="10" fill="#a78bfa"/>
            <rect x="96" y="34" width="80" height="12" rx="6" fill="#1f2937"/>
            <rect x="96" y="54" width="70" height="12" rx="6" fill="#1f2937"/>
            <rect x="96" y="74" width="50" height="12" rx="6" fill="#1f2937"/>
          </svg>
        </div>
        <h3>Crear Productos</h3>
        <p class="muted">Administra el catálogo con códigos únicos, unidades y disponibilidad.</p>
        <div class="cta">
          <a class="btn" th:href="@{/product/form}">Nuevo producto</a>
          <a class="btn" th:href="@{/product/list}">Ver productos</a>
        </div>
      </article>

      <!-- Dar Permisos -->
      <article class="card glass">
        <div class="illus" style="aspect-ratio: 16/9">
          <svg viewBox="0 0 200 112" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect width="200" height="112" rx="14" fill="#0b1022"/>
            <path d="M36 76h128" stroke="#1f2937" stroke-width="10" stroke-linecap="round"/>
            <circle cx="100" cy="50" r="22" fill="#22d3ee"/>
            <path d="M92 50l6 6 12-12" stroke="#0b1022" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3>Dar Permisos</h3>
        <p class="muted">Asigna roles y permisos granulares para proteger la operación.</p>
        <div class="cta">
          <a class="btn" th:href="@{/admin/roles}">Gestionar roles</a>
          <a class="btn" th:href="@{/admin/policies}">Políticas</a>
        </div>
      </article>

      <!-- Envío de Pedidos -->
      <article class="card glass">
        <div class="illus" style="aspect-ratio: 16/9">
          <svg viewBox="0 0 200 112" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect width="200" height="112" rx="14" fill="#0b1022"/>
            <rect x="24" y="48" width="152" height="24" rx="8" fill="#1f2937"/>
            <rect x="36" y="40" width="36" height="36" rx="8" fill="#22d3ee"/>
            <rect x="128" y="40" width="36" height="36" rx="18" fill="#a78bfa"/>
          </svg>
        </div>
        <h3>Envío de Pedidos</h3>
        <p class="muted">Crea, confirma y envía pedidos a sitios asignados con seguimiento.</p>
        <div class="cta">
          <a class="btn primary" th:href="@{/request/form}">Generar pedido</a>
          <a class="btn" th:href="@{/request/list}">Bandeja de pedidos</a>
        </div>
      </article>

      <!-- Historial de Pedidos -->
      <article class="card glass">
        <div class="illus" style="aspect-ratio: 16/9">
          <svg viewBox="0 0 200 112" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect width="200" height="112" rx="14" fill="#0b1022"/>
            <rect x="22" y="28" width="156" height="16" rx="8" fill="#1f2937"/>
            <rect x="22" y="50" width="156" height="16" rx="8" fill="#1f2937"/>
            <rect x="22" y="72" width="110" height="16" rx="8" fill="#1f2937"/>
          </svg>
        </div>
        <h3>Historial de Pedidos</h3>
        <p class="muted">Consulta estados, fechas, cantidades y descarga comprobantes.</p>
        <div class="cta">
          <a class="btn" th:href="@{/request/history}">Ver historial</a>
          <a class="btn" th:href="@{/reports/orders}">Reportes</a>
        </div>
      </article>
    </section>

    <!-- ADMIN QUICK ACTIONS (visible solo a ADMIN) -->
    <section class="card glass" style="margin-top:1.5rem" sec:authorize="hasRole('ADMIN')">
      <h3>Acciones rápidas de Administrador</h3>
      <p class="muted">Atajos para configuración y mantenimiento.</p>
      <div class="cta">
        <a class="btn" th:href="@{/admin/settings}">Ajustes</a>
        <a class="btn" th:href="@{/admin/audit}">Auditoría</a>
        <a class="btn" th:href="@{/backup/export}">Exportar datos</a>
      </div>
    </section>

    <!-- ALERTAS / FLASH MESSAGES -->
    <section th:if="${flashMessage}" style="margin-top:1rem">
      <div class="card glass" th:classappend="' ' + (${flashType} ?: 'info')">
        <strong th:text="${flashTitle} ?: 'Notificación'"></strong>
        <p class="muted" th:text="${flashMessage}">Operación completada.</p>
      </div>
    </section>
  </main>

  <footer class="container footer">
    <div>
      © <span th:text="${#dates.format(#dates.createNow(),'yyyy')}">2025</span>
      <span th:text="${appName} ?: 'SupplyFlow'">SupplyFlow</span>. 
      <span>Todos los derechos reservados.</span>
    </div>
    <div>
      <a th:href="@{/privacy}">Privacidad</a> • <a th:href="@{/terms}">Términos</a>
    </div>
  </footer>
</body>
</html>
