<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:fragment="head">
	<meta charset="UTF-8" />
	<title th:text="' Spring Boot: MVC + Thymeleaf + Data JPA - '+${titulo}"></title>
	<!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">-->
	<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
	<link rel="stylesheet" th:href="@{/css/jquery-ui.min.css}">
	<!--Flag icons from countries NOT IN USE-->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons/css/flag-icons.min.css">
	<!--Personal CSS-->
	<link rel="stylesheet" th:href="@{/css/user-list.css}">
</head>

<body>
	<header th:fragment="header">
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<a class="navbar-brand" href="#">
				<h3 class="font-italic">SupplyFlow</h3>
			</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
				aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav">
					<li class="nav-item active">
						<a class="nav-link" th:href="@{/user/me}">My Page <span class="sr-only">(current)</span></a>
					</li>
					<li sec:authorize="hasAnyRole('ADMIN','SUPERVISOR')" class="nav-item">
						<a class="nav-link" th:href="@{/supply_item/list}">Custodian Items</a>
					</li>
					<li sec:authorize="hasAnyRole('ADMIN','SUPERVISOR')" class="nav-item">
						<a class="nav-link" th:href="@{/user/list}">Users</a>
					</li>
					<li sec:authorize="hasRole('ADMIN')" class="nav-item">
						<a class="nav-link" th:href="@{/invitation_code/list}">Invitation</a>
					</li>
				</ul>
				<ul class="navbar-nav navbar-right">
					<!--When is not authenticated-->
					<li sec:authorize="!isAuthenticated()"><a class="btn btn-outline-primary" th:href="@{/login}">Sign
							In</a></li>
					<!--When is authenticated-->
					<li sec:authorize="isAuthenticated()" class="dropdown show">
						<a class="btn btn-outline-primary dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
							data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<span sec:authentication="name"></span>
						</a>

						<div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
							<form id="logoutForm" th:action="@{/logout}" method="post">

								<!--Spring security by default adds this token.
						I added just to remember-->
								<button class="dropdown-item" onclick="document.getElementById('logoutForm').submit();"
									type="submit">Sign Out</button>
								<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
							</form>
						</div>
					</li>
				</ul>
			</div>
		</nav>
		<div class="alert alert-success" th:if="${success != null}" th:text="${success}"></div>
		<div class="alert alert-danger" th:if="${error != null}" th:text="${error}"></div>
		<div class="alert alert-warning" th:if="${warning != null}" th:text="${warning}"></div>
		<div class="alert alert-info" th:if="${info != null}" th:text="${info}"></div>
	</header>
	<div class="container">

	</div>
	<footer th:fragment="footer" class="mt-auto bg-white border-top">
	  <div class="container py-4 text-center">
	    <!-- Logo -->
	    <img th:src="@{/images/first-class-logo.png}"
	         alt="first-class-logo" style="height:56px;" class="mb-2">
			 
	    <p class="mb-1 small text-muted" sec:authorize="isAuthenticated()">
	      Signed in as
	      <strong class="text-primary" sec:authentication="name"></strong>
	      <span class="text-muted">|</span>
	      <span>Roles:
	        <span class="text-muted" sec:authentication="principal.authorities"></span>
	      </span>
	    </p>

	    <!-- Tecnología -->
	    <p class="mb-1 small text-muted">
	      Powered by
	      <a class="link-primary" href="https://spring.io/projects/spring-boot" target="_blank" rel="noopener">Spring Boot</a>
	      &middot;
	      <a class="link-primary" href="https://www.thymeleaf.org" target="_blank" rel="noopener">Thymeleaf</a>
	    </p>

	    <!-- Legal Info -->
	    <p class="mb-0 small text-muted">
	      &copy; 2017–2025 Company, Inc. All rights reserved.
	      <a class="link-primary" href="#!">Terms</a> ·
	      <a class="link-primary" href="#!">Privacy</a>
	    </p>
	  </div>
	  <!-- My Scripts -->
	  <!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>-->
	  <script th:src="@{/js/jquery-3.3.1.min.js}"></script>
	  <script th:src="@{/js/popper.min.js}"></script>
	  <script th:src="@{/js/bootstrap.min.js}"></script>
	  <script th:src="@{/js/jquery-ui.min.js}"></script>
	</footer>

</body>

</html>